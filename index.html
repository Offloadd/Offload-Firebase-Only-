<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Offload - Modular V2</title>
   
   <!-- Firebase SDK -->
   <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
   <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
   
   <script>
       // Firebase configuration
       const firebaseConfig = {
           apiKey: "AIzaSyA89BZxelKRoK64JnYtSdWUho2WUfWymII",
           authDomain: "capacity-monitor.firebaseapp.com",
           projectId: "capacity-monitor",
           storageBucket: "capacity-monitor.firebasestorage.app",
           messagingSenderId: "455641716280",
           appId: "1:455641716280:web:5848888e290e47114c78cd",
           measurementId: "G-CGR5R0D1SP"
       };

       // Initialize Firebase
       firebase.initializeApp(firebaseConfig);
       const auth = firebase.auth();

       // Auth state listener
       auth.onAuthStateChanged(user => {
           if (user) {
               document.getElementById('authContainer').style.display = 'none';
               document.getElementById('app').style.display = 'block';
               document.getElementById('logoutBtn').style.display = 'block';
               document.getElementById('userBadge').style.display = 'block';
               document.getElementById('userEmail').textContent = user.email;
               window.currentUser = user;
               loadState();
               render();
           } else {
               document.getElementById('authContainer').style.display = 'block';
               document.getElementById('app').style.display = 'none';
               document.getElementById('logoutBtn').style.display = 'none';
               document.getElementById('userBadge').style.display = 'none';
               window.currentUser = null;
           }
       });
   </script>
   
   <link rel="stylesheet" href="styles.css">
</head>
<body>
   <div class="user-badge" id="userBadge">
       ðŸ‘¤ <span id="userEmail"></span>
   </div>
   <button id="logoutBtn" onclick="handleLogout()">Logout</button>
   
   <div id="authContainer" class="auth-container">
       <div class="auth-title">Offload</div>
       <div class="subtitle" style="text-align: center; margin-bottom: 20px;">Sign in to save your data privately in your browser</div>
       <div id="authMessage" class="auth-message"></div>
       <input type="email" id="emailInput" class="auth-input" placeholder="Email" autocomplete="email">
       <input type="password" id="passwordInput" class="auth-input" placeholder="Password (min 6 characters)" autocomplete="current-password">
       <button class="auth-btn" id="signInBtn" onclick="handleSignIn()">Sign In</button>
       <button class="auth-btn" id="createAccountBtn" onclick="handleCreateAccount()">Create Account</button>
   </div>
   <div id="introModal" class="modal-overlay" onclick="if(event.target === this) closeIntroModal()">
       <div class="modal-content">
           <button class="modal-close" onclick="closeIntroModal()">Ã—</button>
           <h2 style="margin-bottom: 16px; color: #111827;">Welcome to Offload</h2>
           <div id="introModal_content" contenteditable="true" style="color: #374151; line-height: 1.6; margin-bottom: 16px; padding: 12px; border: 2px dashed #d1d5db; border-radius: 8px; outline
